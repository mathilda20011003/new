# 飞书机器人集成教程 - AIGC 动态漫监控

> 📌 **适用人群**：零基础实习生  
> 🎯 **目标**：监控 AIGC 动态漫相关的热点新闻，并推送到飞书

---

## 📖 目录

1. [项目介绍](#1-项目介绍)
2. [前置准备](#2-前置准备)
3. [配置飞书机器人](#3-配置飞书机器人)
4. [配置 GitHub](#4-配置-github)
5. [配置关键词](#5-配置关键词)
6. [测试运行](#6-测试运行)
7. [常见问题](#7-常见问题)

---

## 1. 项目介绍

### 这个项目能做什么？

TrendRadar 是一个**热点新闻聚合机器人**，它会：

- ✅ 每小时自动抓取 11 个平台的热搜（知乎、微博、抖音、B站等）
- ✅ 根据你设置的关键词筛选新闻（比如：AI绘画、Sora、动态漫画等）
- ✅ 把筛选后的新闻推送到你的飞书
- ✅ 完全免费，运行在 GitHub 云端

### 为什么适合监控 AIGC 动态漫？

- 🎨 可以监控 AI 绘画工具（Midjourney、Stable Diffusion）
- 🎬 可以监控 AI 视频生成（Sora、Runway、可灵）
- 📚 可以监控动漫行业动态
- 💡 可以监控技术突破和行业融资

---

## 2. 前置准备

### 你需要准备的账号：

1. **GitHub 账号**（用于运行机器人）
   - 如果没有，去 https://github.com 注册一个
   
2. **飞书账号**（用于接收消息）
   - 如果没有，去 https://www.feishu.cn 下载并注册

### 需要的时间：

- ⏱️ 首次配置：约 15-20 分钟
- ⏱️ 后续调整：5 分钟以内

---

## 3. 配置飞书机器人

### 方案选择

飞书有两种配置方案：
- **方案一**：简单快速（推荐新手）- 个人推送
- **方案二**：稳定可靠（推荐团队）- 群组推送

我们先用**方案一**（更简单）。

---

### 方案一：个人推送配置（推荐）

#### 步骤 1：打开飞书机器人构建器

1. 用电脑浏览器打开：https://botbuilder.feishu.cn/home/my-command
2. 用你的飞书账号登录

#### 步骤 2：创建机器人指令

1. 点击页面上的 **"新建机器人指令"** 按钮
2. 在弹出的界面中，点击 **"选择触发器"**
3. 往下滑动，找到并点击 **"Webhook 触发"**

#### 步骤 3：获取 Webhook 地址

1. 此时你会看到一个 **"Webhook 地址"**，类似这样：
   ```
   https://www.feishu.cn/flow/api/trigger-webhook/xxxxxxxxxxxxxxxx
   ```
2. **重要**：把这个地址复制到记事本保存好，后面会用到！

#### 步骤 4：配置参数

1. 在 **"参数"** 输入框里，粘贴以下内容：

```json
{
  "message_type": "text",
  "content": {
    "total_titles": "{{内容}}",
    "timestamp": "{{内容}}",
    "report_type": "{{内容}}",
    "text": "{{内容}}"
  }
}
```

2. 点击 **"完成"** 按钮

#### 步骤 5：配置操作

1. 点击 **"选择操作"**
2. 选择 **"通过官方机器人发消息"**
3. 在 **"消息标题"** 填写：`AIGC动态漫热点监控`

#### 步骤 6：配置消息内容（最关键！）

这一步很重要，请仔细操作：

1. 在消息内容编辑区，点击右侧的 **"+"** 按钮
2. 选择 **"Webhook 触发"**
3. 按照下面的顺序添加 4 个字段：

   - 第 1 个：选择 `report_type`（报告类型）
   - 第 2 个：选择 `text`（正文内容）
   - 第 3 个：选择 `total_titles`（新闻总数）
   - 第 4 个：选择 `timestamp`（时间戳）

4. 最终效果应该是这样的排列：
   ```
   {{report_type}}
   {{text}}
   {{total_titles}}
   {{timestamp}}
   ```

#### 步骤 7：保存并发布

1. 点击右上角的 **"保存"** 按钮
2. 点击 **"发布"** 按钮

#### 步骤 8：开启机器人应用（重要！）

⚠️ **注意**：部分用户需要额外操作，否则会报"系统错误"

1. 打开手机飞书 App
2. 在搜索框搜索 **"机器人"**
3. 找到并点击 **"机器人"** 应用
4. 开启该应用

---

## 4. 配置 GitHub

### 步骤 1：Fork 项目

1. 打开项目地址：https://github.com/mathilda20011003/new
2. 点击右上角的 **"Fork"** 按钮
3. 等待几秒，项目会复制到你的账号下

### 步骤 2：配置 Secret（保密信息）

1. 进入你 Fork 后的项目（地址类似：`https://github.com/你的用户名/new`）
2. 点击顶部的 **"Settings"**（设置）
3. 在左侧菜单找到 **"Secrets and variables"** → 点击 **"Actions"**
4. 点击右上角的 **"New repository secret"** 按钮

### 步骤 3：添加飞书 Webhook

1. **Name**（名称）填写：`FEISHU_WEBHOOK_URL`
2. **Secret**（值）填写：你在步骤 3 保存的 Webhook 地址
3. 点击 **"Add secret"** 按钮

✅ 完成后，你会看到一个名为 `FEISHU_WEBHOOK_URL` 的 Secret

---

## 5. 配置关键词

### 关键词已经配置好了！

我已经为你配置好了 AIGC 动态漫相关的关键词，包括：

#### 🎨 AI 绘画工具
- Midjourney、Stable Diffusion、DALL-E
- 文心一格、通义万相

#### 🎬 AI 视频生成
- Sora、Runway、Pika、可灵

#### 📚 动漫相关
- 动态漫画、国漫、日漫、漫改

#### 🏢 知名公司
- 字节、腾讯、百度、阿里、商汤

#### 💡 技术相关
- ChatGPT、Claude、大模型、AIGC

### 如何查看或修改关键词？

1. 在你的项目中，点击 `config` 文件夹
2. 点击 `frequency_words.txt` 文件
3. 点击右上角的 ✏️ 编辑按钮
4. 修改后点击 **"Commit changes"** 保存

### 关键词语法说明

```
普通词        # 包含即匹配
+必须词       # 必须同时包含
!过滤词       # 包含则排除

空行          # 分隔不同词组
```

**示例**：
```
AI绘画
Midjourney
+发布        # 必须同时包含"发布"
!广告        # 排除包含"广告"的新闻
```

---

## 6. 测试运行

### 手动触发测试

1. 进入你的项目
2. 点击顶部的 **"Actions"** 标签
3. 如果看到提示 "Workflows aren't being run on this forked repository"
   - 点击绿色按钮 **"I understand my workflows, go ahead and enable them"**
4. 在左侧找到 **"Hot News Crawler"**
5. 点击右侧的 **"Run workflow"** 按钮
6. 再次点击绿色的 **"Run workflow"** 确认

### 查看运行结果

1. 等待 1-2 分钟
2. 刷新页面，你会看到一个运行记录
3. 点击进去查看详细日志
4. 如果成功，你的飞书会收到推送消息！

### 自动运行

配置成功后，机器人会：
- ⏰ 每小时自动运行一次
- 📱 自动推送到你的飞书
- 🔄 无需任何手动操作

---

## 7. 常见问题

### Q1: 飞书收不到消息？

**检查清单**：
1. ✅ Webhook 地址是否正确复制到 GitHub Secret？
2. ✅ 飞书机器人是否已发布？
3. ✅ 手机飞书是否开启了"机器人"应用？
4. ✅ GitHub Actions 是否运行成功？（查看 Actions 页面）

### Q2: 收到的新闻太少或太多？

**调整方法**：
- **太少**：减少关键词中的过滤词（!开头的）
- **太多**：增加必须词（+开头的）或过滤词

### Q3: 想改成群组推送怎么办？

使用 README.md 中的**方案二**，步骤类似，但需要：
1. 创建飞书群组
2. 在机器人配置中选择"发送飞书消息"→"群消息"
3. 选择你的群组

### Q4: 如何调整推送频率？

1. 进入项目的 `.github/workflows/crawler.yml` 文件
2. 找到 `schedule` 部分
3. 修改 cron 表达式（建议不要太频繁，避免被限流）

### Q5: 想只在工作时间接收推送？

编辑 `config/config.yaml` 文件：

```yaml
notification:
  push_window:
    enabled: true          # 改为 true
    time_range:
      start: "09:00"       # 开始时间
      end: "18:00"         # 结束时间
    once_per_day: false    # 是否每天只推一次
```

---

## 🎉 恭喜完成配置！

现在你已经成功配置了一个专门监控 AIGC 动态漫的飞书机器人！

### 下一步建议：

1. 📊 观察几天，看看推送的内容是否符合预期
2. 🔧 根据实际情况调整关键词
3. 📱 可以同时配置多个通知渠道（企业微信、钉钉等）
4. 🌐 开启 GitHub Pages 查看网页版报告

### 需要帮助？

- 📖 查看项目完整文档：[README.md](README.md)
- 💬 在 GitHub Issues 提问
- 📮 关注作者公众号获取更多教程

---

**祝你使用愉快！** 🚀

