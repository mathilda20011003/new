# 🤖 微信公众号AI摘要爬虫 - 使用说明

## 🎯 系统功能

✅ **自动运行**: 每天上午10:00推送微信公众号AI摘要  
✅ **智能筛选**: 根据关键词过滤相关文章  
✅ **AI摘要**: 使用Gemini模型生成专业摘要  
✅ **飞书推送**: 直接推送到飞书群组  
✅ **真实时间**: 显示文章实际发布时间  
✅ **简洁格式**: 无重复标题，格式清晰  

## 🚀 快速开始

### 1. 部署到GitHub（5分钟）

```bash
# 运行部署脚本
python deploy.py
```

### 2. 配置GitHub Secrets

在GitHub仓库设置中添加：
- `FEISHU_WEBHOOK_URL`: 飞书工作流地址
- `OPENROUTER_API_KEY`: OpenRouter API密钥  
- `WEWE_RSS_BASE_URL`: WeWe RSS服务地址

### 3. 测试运行

GitHub仓库 → Actions → WeChat AI Summary Crawler → Run workflow

## 📱 消息格式

```
📍 机器之心
📰 AI视频的天花板被掀翻！测完SkyReels后飘了
💡 SkyReels是一款革命性的AI视频生成工具，能够根据文本描述自动生成高质量的专业级视频内容...
🔗 阅读原文 | 2025-11-04 03:43:07
   https://mp.weixin.qq.com/s/FIkmbXPq31TmWgl2hgeXIQ

📍 短剧自习室  
📰 10月漫剧市场：播放规模突破60亿
💡 10月漫剧市场呈现爆发式增长，总播放量突破60亿次，头部玩家格局发生重大变化...
🔗 阅读原文 | 2025-11-04 03:43:07
   https://mp.weixin.qq.com/s/...
```

## 🔧 手动触发

### GitHub网页（推荐）
1. 进入GitHub仓库 → Actions
2. 选择 WeChat AI Summary Crawler
3. 点击 Run workflow

### 本地运行
```bash
python manual_trigger.py
```

### GitHub CLI
```bash
gh workflow run "WeChat AI Summary Crawler"
```

## ⚙️ 配置管理

### 修改公众号配置
编辑 `config/wechat_accounts.yaml`:

```yaml
accounts:
  - name: "公众号名称"
    feed_id: "MP_WXS_123456"
    keywords:
      - "关键词1"
      - "关键词2"
```

### 修改运行时间
编辑 `.github/workflows/wechat-crawler.yml`:

```yaml
schedule:
  - cron: '0 2 * * *'  # 北京时间10:00
```

## 📊 监控运行

### 查看日志
GitHub仓库 → Actions → 点击运行记录 → 展开步骤

### 常见状态
- ✅ 成功：正常推送
- 🔄 运行中：正在处理
- ❌ 失败：检查日志

## 🛠️ 故障排除

| 问题 | 解决方案 |
|------|----------|
| 推送失败 | 检查飞书Webhook URL |
| API错误 | 验证OpenRouter密钥 |
| 无文章 | 检查WeWe RSS服务 |
| 时间错误 | 查看时间解析日志 |

## 📞 快速支持

### 测试系统
```bash
python final_deployment_test.py
```

### 紧急推送
```bash
python manual_trigger.py
```

### 查看配置
```bash
python -c "import yaml; print(yaml.safe_load(open('config/wechat_accounts.yaml')))"
```

## 🎉 享受使用

系统部署完成后，您将每天上午10点收到精准的微信公众号AI摘要！

**特点**：
- 📰 只推送匹配关键词的文章
- 🤖 AI生成的专业摘要
- ⏰ 显示真实发布时间
- 🎯 格式简洁无冗余

**下次更新**：
- 修改 `config/wechat_accounts.yaml` 配置
- 推送到GitHub自动生效
